<div class="container-fluid py-4 schedule-wrapper">
  <div class="row mb-4">
    <div class="col-12">
      <mat-card class="header-card shadow-sm border-0">
        <mat-card-content class="d-flex align-items-center p-3">
          <h2 class="h4 mb-0 fw-bold text-dark">Mi Horario</h2>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <div class="schedule-container shadow-sm">
  <div class="table-responsive">
    <div class="schedule-grid">

      <div class="grid-header row g-0">
        <div class="col-time header-cell border-end d-flex align-items-center justify-content-center">
          <span class="fw-bold text-muted small">Hora</span>
        </div>

        @for (day of weekSchedule; track day.day) {
          <div class="col header-cell border-end p-2 text-center">
            <div class="day-name">{{ day.day | uppercase }}</div>
            <div class="day-date text-muted small">{{ day.date }}</div>
          </div>
        }
      </div>

      <div class="grid-body d-flex">
        <div class="col-time border-end bg-light">
          @for (time of timeSlots; track time) {
            <div class="time-slot-label border-bottom">
              {{ time }}
            </div>
          }
        </div>

        @for (day of weekSchedule; track day.day) {
          <div class="col day-column position-relative border-end">
            @for (time of timeSlots; track time) {
              <div class="grid-row-line border-bottom"></div>
            }

            @for (classItem of day.classes; track classItem.id) {
              <div class="class-positioner"
                   [ngStyle]="getClassPosition(classItem.startTime, classItem.endTime)">
                <div class="class-card shadow-sm" [ngClass]="classItem.color">
                  <div class="class-content">
                    <div class="class-title">{{ classItem.subject }}</div>
                    <div class="class-meta">
                      <div class="meta-item">
                        <mat-icon>schedule</mat-icon>
                        <span>{{ classItem.startTime }} - {{ classItem.endTime }}</span>
                      </div>
                      <div class="meta-item">
                        <mat-icon>place</mat-icon>
                        <span>{{ classItem.room }}</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            }
          </div>
        }
      </div>
    </div>
  </div>
</div>

  <div class="mobile-list d-lg-none mt-4">
    @for (day of weekSchedule; track day.day) {
      <div class="mobile-day-group mb-4">
        <h3 class="h6 fw-bold text-muted mb-2 px-2">{{ day.day }} Â· {{ day.date }}</h3>
        @for (classItem of day.classes; track classItem.id) {
          <mat-card class="mobile-card mb-2 border-0 shadow-sm" [ngClass]="'border-left-' + classItem.color">
            <mat-card-content class="p-3">
              <div class="d-flex justify-content-between">
                <div>
                  <div class="fw-bold">{{ classItem.subject }}</div>
                  <div class="small text-muted">{{ classItem.teacher }}</div>
                </div>
                <div class="text-end">
                  <span class="badge bg-light text-dark rounded-pill">{{ classItem.startTime }}</span>
                  <div class="small text-muted mt-1">{{ classItem.room }}</div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        }
      </div>
    }
  </div>
</div>
